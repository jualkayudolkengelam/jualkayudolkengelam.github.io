{% comment %}
  ============================================================================
  Tutorial FAQ Block Component
  ============================================================================

  @file        _includes/posts/tutorial/block--faq.html
  @description Frequently Asked Questions with Bootstrap accordion
  @version     1.0.0
  @date        2025-11-20
  @author      arisciwek

  Features:
  ---------
  - Bootstrap accordion for FAQ items
  - Icon for each question
  - Collapsible answers
  - First item expanded by default
  - Schema.org FAQPage structured data

  Parameters:
  -----------
  - page.faq: Array of FAQ objects
    - pertanyaan: Question text
    - jawaban: Answer text
    - icon: Bootstrap icon (optional)

  Usage:
  ------
  {% include posts/tutorial/block--faq.html %}

  ============================================================================
{% endcomment %}

{% if page.faq %}
<div class="my-5 faq-section-wrapper">
  <!-- Section Header -->
  <div class="card border-0 faq-section-header-card shadow-lg mb-4">
    <div class="card-body text-white text-center py-4" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 50%, #6d28d9 100%);">
      <i class="bi bi-question-circle-fill mb-2" style="font-size: 2.5rem;"></i>
      <h2 class="h2 mb-0 fw-bold text-white">Pertanyaan yang Sering Diajukan</h2>
      <p class="mb-0 mt-2 small" style="opacity: 0.9;">Jawaban untuk pertanyaan umum Anda</p>
    </div>
  </div>

  <!-- FAQ Accordion -->
  <div class="accordion accordion-flush faq-accordion" id="faqAccordion">
    {% for item in page.faq %}
    <div class="accordion-item border-0 faq-accordion-item shadow-sm mb-3 {{ item.css_class | default: '' }}">
      <h3 class="accordion-header faq-question-header" id="{{ item.id | default: 'faq-heading' }}-{{ forloop.index }}">
        <button class="accordion-button faq-question-button {% unless forloop.first %}collapsed{% endunless %} fw-bold" type="button" data-bs-toggle="collapse" data-bs-target="#faq-collapse-{{ forloop.index }}" aria-expanded="{% if forloop.first %}true{% else %}false{% endif %}" aria-controls="faq-collapse-{{ forloop.index }}">
          <i class="{{ item.icon | default: 'bi-question-circle' }} text-primary me-2"></i>
          {{ item.question | default: item.pertanyaan }}
        </button>
      </h3>
      <div id="faq-collapse-{{ forloop.index }}" class="accordion-collapse collapse faq-answer-collapse {% if forloop.first %}show{% endif %}" aria-labelledby="{{ item.id | default: 'faq-heading' }}-{{ forloop.index }}" data-bs-parent="#faqAccordion">
        <div class="accordion-body text-muted faq-answer-body">
          {{ item.answer | default: item.jawaban }}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
</div>

<!-- Schema.org FAQPage structured data -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {% for item in page.faq %}
    {
      "@type": "Question",
      "name": "{{ item.pertanyaan | escape }}",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "{{ item.jawaban | escape }}"
      }
    }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ]
}
</script>
{% endif %}
