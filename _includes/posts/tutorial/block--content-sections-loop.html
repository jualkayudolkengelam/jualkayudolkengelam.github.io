{% comment %}
  ============================================================================
  Tutorial Content Sections Loop Block Component
  ============================================================================

  @file        _includes/posts/tutorial/block--content-sections-loop.html
  @description Loops through all content sections and renders each
  @version     1.0.0
  @date        2025-11-20
  @author      arisciwek

  Features:
  ---------
  - Loops through page.sections internally
  - Renders each section with its own wrapper
  - Passes section data correctly to block--content-section.html

  Usage:
  ------
  {% include posts/tutorial/block--content-sections-loop.html %}

  ============================================================================
{% endcomment %}

{% for item in page.sections %}
  {% assign section = item.section %}

  <section id="{{ section.id | default: 'content-section' }}"
           class="block-content-section {{ section.css_class | default: '' }}">

    <!-- H2 Section Header -->
    <div class="my-5">
      <div class="card border-0 shadow-lg">
        <div class="card-body text-white text-center py-4 px-3" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 50%, #1d4ed8 100%);">
          <i class="{{ section.icon }} mb-2 fs-2-5rem"></i>
          <h2 class="h2 mb-0 fw-bold text-white">{{ section.title }}</h2>
          {% if section.intro %}
          <p class="mb-0 mt-3 lead" style="opacity: 0.95;">{{ section.intro }}</p>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- Cards: 3 Cards -->
    {% if section.cards %}
    <div class="row g-3 my-4">
      {% for card in section.cards %}
      <div class="col-md-4">
        <div id="{{ card.id | default: '' }}" class="card border-0 shadow-sm h-100 hover-lift {{ card.css_class | default: '' }}">
          <div class="card-body">

            <!-- H3 Card Title -->
            <div class="d-flex align-items-start mb-3">
              <div class="bg-{{ card.color | default: 'primary' }} bg-opacity-10 rounded-circle d-flex align-items-center justify-content-center flex-shrink-0 me-3" style="width: 50px; height: 50px;">
                <i class="{{ card.icon }} text-{{ card.color | default: 'primary' }}" style="font-size: 1.5rem;"></i>
              </div>
              <div class="flex-grow-1">
                <h3 class="h5 text-wood mb-0 fw-bold">{{ card.title }}</h3>
              </div>
            </div>

            <!-- Card Paragraphs -->
            {% if card.paragraphs %}
              {% for para in card.paragraphs %}
              <p class="text-muted {% if forloop.last %}mb-3{% else %}mb-2{% endif %}">{{ para }}</p>
              {% endfor %}
            {% endif %}

            <!-- H4 Details -->
            {% if card.details %}
            <div class="mt-3">
              {% for detail in card.details %}
              <div id="{{ detail.id | default: '' }}" class="mb-3 {{ detail.css_class | default: '' }} {% unless forloop.last %}pb-3 border-bottom{% endunless %}">
                <h4 class="h6 fw-bold text-wood mb-2">
                  <i class="bi bi-arrow-right-circle text-{{ card.color | default: 'primary' }} me-2"></i>{{ detail.h4 }}
                </h4>
                <p class="small text-muted mb-0">{{ detail.paragraph }}</p>
              </div>
              {% endfor %}
            </div>
            {% endif %}

          </div>
        </div>
      </div>
      {% endfor %}
    </div>
    {% endif %}

  </section>
{% endfor %}
