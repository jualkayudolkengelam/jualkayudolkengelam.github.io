{% comment %}
  Product List Component - Responsive Table/Card View

  Usage:
  {% include product-list.html %}

  Optional Parameters:
  - title: Custom heading (default: "Daftar Harga Kayu Dolken Gelam")
  - show_footer: Show/hide footer note (default: true)

  Example with custom title:
  {% include product-list.html title="Harga Terbaru Kayu Dolken" %}

  Example without footer:
  {% include product-list.html show_footer=false %}
{% endcomment %}

{% assign list_title = include.title | default: "Daftar Harga Kayu Dolken Gelam" %}
{% assign show_footer = include.show_footer | default: true %}

<div class="row mb-5">
  <div class="col-12">
    <!-- Table View for Desktop -->
    <div class="card border-0 shadow-sm d-none d-md-block">
      <div class="card-header bg-wood text-white">
        <h4 class="mb-0"><i class="bi bi-table me-2"></i>{{ list_title }}</h4>
      </div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-hover mb-0">
            <thead class="table-light">
              <tr>
                <th scope="col" class="text-center">#</th>
                <th scope="col">Diameter</th>
                <th scope="col">Panjang</th>
                <th scope="col">Harga per Batang</th>
                <th scope="col">Kegunaan Umum</th>
                <th scope="col" class="text-center">Aksi</th>
              </tr>
            </thead>
            <tbody>
              {% assign sorted_products = site.products | sort: "price" %}
              {% for product in sorted_products %}
              <tr{% if product.popular %} class="table-warning"{% endif %}>
                <td class="text-center">{{ forloop.index }}</td>
                <td><strong>{{ product.diameter }}</strong>{% if product.popular %} <span class="badge bg-warning text-dark">Populer</span>{% endif %}</td>
                <td>4 Meter</td>
                <td class="text-wood fw-bold">Rp {{ product.price | rupiah }}</td>
                <td><small>{{ product.features | first }}</small></td>
                <td class="text-center">
                  <a href="{{ product.url | relative_url }}" class="btn btn-sm btn-wood me-1">
                    <i class="bi bi-info-circle"></i> Detail
                  </a>
                  <a href="https://wa.me/{{ site.business.whatsapp }}?text=Halo,%20saya%20ingin%20pesan%20{{ product.title }}%20-%20Rp%20{{ product.price }}" class="btn btn-sm btn-success" target="_blank">
                    <i class="bi bi-whatsapp"></i> Pesan
                  </a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      {% if show_footer %}
      <div class="card-footer bg-light">
        <small class="text-muted">
          <i class="bi bi-info-circle me-1"></i>
          Harga dapat berubah sewaktu-waktu. Hubungi kami untuk info terkini dan penawaran khusus untuk pembelian dalam jumlah besar.
        </small>
      </div>
      {% endif %}
    </div>

    <!-- Card View for Mobile -->
    <div class="d-md-none">
      <h4 class="text-wood mb-3"><i class="bi bi-list-ul me-2"></i>{{ list_title }}</h4>
      {% assign sorted_products = site.products | sort: "price" %}
      {% for product in sorted_products %}
      <div class="card border-0 shadow-sm mb-3{% if product.popular %} border-warning{% endif %}"{% if product.popular %} style="border-width: 2px !important;"{% endif %}>
        {% if product.popular %}
        <div class="card-header bg-warning text-dark">
          <i class="bi bi-star-fill me-1"></i><strong>Produk Populer</strong>
        </div>
        {% endif %}
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-start mb-2">
            <h5 class="card-title text-wood mb-0">{{ product.diameter }}</h5>
            <span class="badge bg-secondary">{{ forloop.index }}</span>
          </div>
          <hr>
          <p class="mb-2"><strong>Panjang:</strong> 4 Meter</p>
          <p class="mb-2"><strong>Harga:</strong> <span class="text-wood fw-bold fs-5">Rp {{ product.price | rupiah }}</span></p>
          <p class="mb-3 text-muted"><small><i class="bi bi-info-circle me-1"></i>{{ product.features | first }}</small></p>
          <div class="d-grid gap-2">
            <a href="{{ product.url | relative_url }}" class="btn btn-wood">
              <i class="bi bi-info-circle me-1"></i> Lihat Detail
            </a>
            <a href="https://wa.me/{{ site.business.whatsapp }}?text=Halo,%20saya%20ingin%20pesan%20{{ product.title }}%20-%20Rp%20{{ product.price }}" class="btn btn-success" target="_blank">
              <i class="bi bi-whatsapp me-1"></i> Pesan via WhatsApp
            </a>
          </div>
        </div>
      </div>
      {% endfor %}
      {% if show_footer %}
      <div class="alert alert-info">
        <small>
          <i class="bi bi-info-circle me-1"></i>
          Harga dapat berubah sewaktu-waktu. Hubungi kami untuk info terkini dan penawaran khusus untuk pembelian dalam jumlah besar.
        </small>
      </div>
      {% endif %}
    </div>
  </div>
</div>
