{% comment %}
  ============================================================================
  Schema Include - Related Content by Node (ItemList with URL references)
  ============================================================================

  @file        _includes/schema--related-content--by-node.html
  @description Dedicated schema include for related articles ItemList markup.
               Uses URL references to avoid creating multiple Article entities.

  @version     2.0.0
  @date        2025-12-15
  @author      jualkayudolkengelam
  @copyright   2024-2025 Kayu Dolken Gelam - Amirudin Abdul Karim
  @license     All rights reserved

  Architecture:
  -------------
  - Block (_includes/block--related-content--by-node.html): Visual rendering
  - Schema (_includes/schema--related-content--by-node.html): Schema markup
  - Page wrapper (_layouts/page--post.html): Include schema before </body>

  Features:
  ---------
  - Schema.org ItemList with URL references only
  - Does NOT create separate BlogPosting/Article entities
  - Perfect schema accuracy (1 ItemList, not multiple Articles)

  Parameters:
  -----------
  - posts: Array of post objects (required)
  - title: Section title for schema name (default: "Artikel Terkait Lainnya")

  Usage:
  ------
  {% include schema/schema--related-content--by-node.html posts=final_posts %}

  ============================================================================
{% endcomment %}

{% assign schema_posts = include.posts %}
{% assign schema_title = include.title | default: "Artikel Terkait Lainnya" %}

{% if schema_posts and schema_posts.size > 0 %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "@id": "{{ page.url | absolute_url }}#related-articles-by-node",
  "name": "{{ schema_title }}",
  "description": "Artikel blog terkait yang mungkin Anda minati",
  "numberOfItems": {{ schema_posts.size }},
  "itemListElement": [
    {% for post in schema_posts %}
    {
      "@type": "ListItem",
      "position": {{ forloop.index }},
      "name": "{{ post.title | escape }}",
      "url": "{{ post.url | absolute_url }}"
    }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ]
}
</script>
{% endif %}
