{% comment %}
  ============================================================================
  Schema Include - Breadcrumb (BreadcrumbList)
  ============================================================================

  @file        _includes/schema--breadcrumb.html
  @description Dedicated schema include for BreadcrumbList markup.
               Separated from block--breadcrumb.html for better architecture
               and schema centralization at page wrapper level.

  @version     1.0.0
  @date        2025-11-21
  @author      jualkayudolkengelam
  @copyright   2024-2025 Kayu Dolken Gelam - Amirudin Abdul Karim
  @license     All rights reserved

  Architecture:
  -------------
  - Block (_includes/block--breadcrumb.html): Visual breadcrumb navigation
  - Schema (_includes/schema--breadcrumb.html): BreadcrumbList schema markup
  - Page wrapper (_layouts/page--*.html): Include schema before </body>

  Features:
  ---------
  - Schema.org BreadcrumbList markup
  - Supports custom items or default structure
  - SEO optimized for Google Rich Results
  - Flexible for product pages, blog posts, etc.

  Parameters:
  -----------
  - items: (optional) Array of breadcrumb items
    Each item should have: name, url
  - current_title: (required if items not provided) Current page title
  - parent_name: (optional) Parent section name (default: "Produk")
  - parent_url: (optional) Parent section URL (default: "/#product")

  Usage:
  ------
  Basic (auto breadcrumb):
  {% include schema--breadcrumb.html current_title=page.title %}

  Custom parent:
  {% include schema--breadcrumb.html
     current_title=page.title
     parent_name="Blog"
     parent_url="/blog/"
  %}

  Custom items:
  {% include schema--breadcrumb.html items=breadcrumb_items %}

  Called from:
  ------------
  - _layouts/page--product.html (before </body> tag)
  - _layouts/page--post.html (before </body> tag)
  - Any page wrapper needing breadcrumb schema

  ============================================================================
{% endcomment %}

{% comment %} Build breadcrumb items {% endcomment %}
{% if include.items %}
  {% assign breadcrumb_items = include.items %}
{% else %}
  {% comment %} Default breadcrumb structure {% endcomment %}
  {% assign parent_name = include.parent_name | default: "Produk" %}
  {% assign parent_url = include.parent_url | default: "/#product" %}
  {% assign current_title = include.current_title | default: page.title %}
  {% assign current_url = page.url %}
{% endif %}

<!-- Breadcrumb Schema (JSON-LD) -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {% if include.items %}
      {% comment %} Custom items mode {% endcomment %}
      {% for item in breadcrumb_items %}
      {
        "@type": "ListItem",
        "position": {{ forloop.index }},
        "name": "{{ item.name }}",
        "item": "{{ item.url | absolute_url }}"
      }{% unless forloop.last %},{% endunless %}
      {% endfor %}
    {% else %}
      {% comment %} Default mode {% endcomment %}
      {
        "@type": "ListItem",
        "position": 1,
        "name": "Beranda",
        "item": "{{ site.url }}{{ site.baseurl }}/"
      },
      {
        "@type": "ListItem",
        "position": 2,
        "name": "{{ parent_name }}",
        "item": "{{ site.url }}{{ site.baseurl }}{{ parent_url }}"
      },
      {
        "@type": "ListItem",
        "position": 3,
        "name": "{{ current_title }}",
        "item": "{{ current_url | absolute_url }}"
      }
    {% endif %}
  ]
}
</script>
